description: The DRP pipeline specialized for the ci_hsc test dataset.
instrument: lsst.obs.subaru.HyperSuprimeCam
imports:
  location: "${OBS_SUBARU_DIR}/pipelines/DRPFakes.yaml"
  exclude:
    - faro_step2
    - faro_step3
    - faro_step5

tasks:
  processCcdWithFakes:
    class: lsst.pipe.tasks.processCcdWithFakes.ProcessCcdWithFakesTask
    config:
      insertFakes.doProcessAllDataIds: True
      doApplyExternalTractSkyWcs: True
      doApplyExternalTractPhotoCalib: True
      doApplyExternalGlobalPhotoCalib: False
      connections.photoCalibName: "jointcal"
  makeWarp:
    class: lsst.pipe.tasks.makeCoaddTempExp.MakeWarpTask
    config:
      connections.photoCalibName: "jointcal"
      useGlobalExternalPhotoCalib: False
      connections.coaddName: "fakes_deep"
      connections.calexpType: "fakes_"
  deblend:
    class: lsst.pipe.tasks.deblendCoaddSourcesPipeline.DeblendCoaddSourcesMultiTask
    config:
      connections.inputCoaddName: "fakes_deep"
      connections.outputCoaddName: "fakes_deep"
      multibandDeblend.useCiLimits: True
      multibandDeblend.processSingles: False
